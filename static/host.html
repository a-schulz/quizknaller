<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QuizKnaller üí• - Host</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/static/host.css">
</head>
<body>
    <!-- Select Quiz Screen -->
    <div id="select-screen" class="screen active">
        <div class="select-container">
            <div class="logo-section">
                <h1 class="logo">Quiz<span>Knaller</span></h1>
                <p class="tagline">Wissen macht BUMM! üí•</p>
            </div>
            <h2>Quiz ausw√§hlen</h2>
            <div id="quiz-list" class="quiz-list"></div>
        </div>
    </div>

    <!-- Lobby Screen -->
    <div id="lobby-screen" class="screen">
        <div class="lobby-header">
            <div class="logo-small">Quiz<span>Knaller</span></div>
            <div class="quiz-info">
                <span id="lobby-quiz-title"></span>
            </div>
            <div class="header-actions">
                <button id="team-config-toggle" class="btn-team-config" title="Team-Einstellungen">‚öôÔ∏è Teams</button>
                <button id="end-game-btn" class="btn-end-game" title="Spiel beenden">‚ùå Beenden</button>
            </div>
        </div>
        <div class="lobby-main">
            <div class="left-panels">
                <div class="join-info">
                    <div class="join-code-section">
                        <div class="game-code-display">
                            <span class="code-label">Spiel-Code</span>
                            <span class="code-value" id="game-code-display"></span>
                        </div>
                        <div class="qr-code-container">
                            <img id="qr-code" src="" alt="QR Code" class="qr-code">
                        </div>
                        <div class="join-url-section">
                            <span class="join-url-label">Scanne den QR-Code oder besuche</span>
                            <div class="join-url" id="join-url"></div>
                        </div>
                    </div>
                </div>
                <!-- Mobile: collapsible team config -->
                <details class="team-config-panel team-config-mobile">
                    <summary class="panel-header">
                        <span class="panel-icon">‚öôÔ∏è</span>
                        <span>Team-Einstellungen</span>
                        <span class="panel-chevron">‚ñº</span>
                    </summary>
                    <div class="panel-content">
                        <label class="team-mode-toggle">
                            <input type="checkbox" id="team-mode-checkbox-mobile">
                            <span>Team-Modus aktivieren</span>
                        </label>
                        <div id="team-settings-mobile" class="team-settings" style="display: none;">
                            <div class="team-input-group">
                                <label>Teams (komma-getrennt):</label>
                                <input type="text" id="teams-input-mobile" placeholder="z.B. Team Rot, Team Blau, Team Gr√ºn">
                            </div>
                            <div class="team-input-group">
                                <label>Top-Spieler pro Team:</label>
                                <input type="number" id="top-n-input-mobile" value="3" min="1" max="10">
                            </div>
                            <button id="save-teams-btn-mobile" class="btn-save-teams">Teams speichern</button>
                        </div>
                    </div>
                </details>
            </div>
            <div class="players-section">
                <h3>Spieler (<span id="player-count">0</span>)</h3>
                <div class="players-grid" id="players-grid"></div>
            </div>
        </div>
        <!-- Desktop: offcanvas team config -->
        <div class="team-config-offcanvas" id="team-config-offcanvas">
            <div class="offcanvas-header">
                <h3>‚öôÔ∏è Team-Einstellungen</h3>
                <button class="offcanvas-close" id="team-config-close">‚úï</button>
            </div>
            <div class="offcanvas-content">
                <label class="team-mode-toggle">
                    <input type="checkbox" id="team-mode-checkbox">
                    <span>Team-Modus aktivieren</span>
                </label>
                <div id="team-settings" class="team-settings" style="display: none;">
                    <div class="team-input-group">
                        <label>Teams (komma-getrennt):</label>
                        <input type="text" id="teams-input" placeholder="z.B. Team Rot, Team Blau, Team Gr√ºn">
                    </div>
                    <div class="team-input-group">
                        <label>Top-Spieler pro Team:</label>
                        <input type="number" id="top-n-input" value="3" min="1" max="10">
                    </div>
                    <button id="save-teams-btn" class="btn-save-teams">Teams speichern</button>
                </div>
            </div>
        </div>
        <div class="offcanvas-backdrop" id="offcanvas-backdrop"></div>
        <div class="lobby-footer">
            <label class="autoplay-toggle">
                <input type="checkbox" id="autoplay-checkbox">
                <span>Automatisch zur n√§chsten Frage</span>
            </label>
            <button id="start-game-btn" class="btn-start" disabled>Spiel starten üöÄ</button>
        </div>
    </div>

    <!-- Countdown Screen -->
    <div id="countdown-screen" class="screen">
        <div class="countdown-container">
            <h2>Macht euch bereit!</h2>
            <div class="big-countdown" id="countdown-number">3</div>
        </div>
    </div>

    <!-- Question Screen -->
    <div id="question-screen" class="screen">
        <div class="question-header">
            <div class="question-info">
                <span class="question-number" id="question-number">Frage 1 von 10</span>
            </div>
            <div class="timer-section">
                <div class="timer-circle" id="timer-circle">
                    <svg viewBox="0 0 100 100">
                        <circle class="timer-bg" cx="50" cy="50" r="45"/>
                        <circle class="timer-progress" id="timer-progress" cx="50" cy="50" r="45"/>
                    </svg>
                    <span class="timer-text" id="timer-text">20</span>
                </div>
            </div>
            <div class="header-right-section">
                <div class="header-game-code" id="question-game-code">
                    <span class="header-code-label">Code:</span>
                    <span class="header-code-value"></span>
                </div>
                <div class="answer-count">
                    <span id="answered-count">0</span> / <span id="total-players">0</span>
                    <small>Antworten</small>
                </div>
            </div>
        </div>
        <div class="question-main">
            <h1 class="question-text" id="question-text"></h1>
        </div>
        <div class="answers-display" id="answers-display">
            <div class="answer-option answer-0">
                <span class="answer-icon">‚ñ≤</span>
                <span class="answer-text" id="answer-0"></span>
            </div>
            <div class="answer-option answer-1">
                <span class="answer-icon">‚óÜ</span>
                <span class="answer-text" id="answer-1"></span>
            </div>
            <div class="answer-option answer-2">
                <span class="answer-icon">‚óè</span>
                <span class="answer-text" id="answer-2"></span>
            </div>
            <div class="answer-option answer-3">
                <span class="answer-icon">‚ñ†</span>
                <span class="answer-text" id="answer-3"></span>
            </div>
        </div>
    </div>

    <!-- Results Screen -->
    <div id="results-screen" class="screen">
        <div class="results-header">
            <div class="header-game-code" id="results-game-code">
                <span class="header-code-label">Code:</span>
                <span class="header-code-value"></span>
            </div>
            <button id="end-game-btn-results" class="btn-end-game" title="Spiel beenden">‚ùå Beenden</button>
            <div id="autoplay-countdown" class="autoplay-countdown" style="display: none;">
                N√§chste Frage in <span id="autoplay-timer">10</span>s
            </div>
            <button id="next-question-btn" class="btn-next">Weiter ‚ûú</button>
        </div>
        <div class="results-main">
            <div class="correct-answer-display">
                <span class="correct-label">Richtige Antwort:</span>
                <div class="correct-answer-box" id="correct-answer-box"></div>
            </div>
            <div class="answer-stats" id="answer-stats">
                <div class="stat-bar stat-0">
                    <div class="stat-fill" id="stat-fill-0"></div>
                    <span class="stat-icon">‚ñ≤</span>
                    <span class="stat-count" id="stat-count-0">0</span>
                    <span class="stat-percent" id="stat-percent-0">0%</span>
                </div>
                <div class="stat-bar stat-1">
                    <div class="stat-fill" id="stat-fill-1"></div>
                    <span class="stat-icon">‚óÜ</span>
                    <span class="stat-count" id="stat-count-1">0</span>
                    <span class="stat-percent" id="stat-percent-1">0%</span>
                </div>
                <div class="stat-bar stat-2">
                    <div class="stat-fill" id="stat-fill-2"></div>
                    <span class="stat-icon">‚óè</span>
                    <span class="stat-count" id="stat-count-2">0</span>
                    <span class="stat-percent" id="stat-percent-2">0%</span>
                </div>
                <div class="stat-bar stat-3">
                    <div class="stat-fill" id="stat-fill-3"></div>
                    <span class="stat-icon">‚ñ†</span>
                    <span class="stat-count" id="stat-count-3">0</span>
                    <span class="stat-percent" id="stat-percent-3">0%</span>
                </div>
            </div>
            <div class="leaderboard-preview" id="leaderboard-preview"></div>
        </div>
    </div>

    <!-- Final Leaderboard Screen -->
    <div id="final-screen" class="screen">
        <div class="final-container">
            <div class="confetti-container" id="confetti"></div>
            <h1 class="final-title">üèÜ Endergebnis üèÜ</h1>
            <div class="podium" id="podium"></div>
            <div class="full-leaderboard" id="full-leaderboard"></div>
            <button id="new-game-btn" class="btn-new-game">Neues Spiel üîÑ</button>
        </div>
    </div>

    <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
    <script src="/static/host.js"></script>
</body>
</html>
